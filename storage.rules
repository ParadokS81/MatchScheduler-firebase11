rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Temp uploads - authenticated users can write to their path
    match /logo-uploads/{teamId}/{userId}/{fileName} {
      allow write: if request.auth != null && request.auth.uid == userId;
      allow read: if false; // Only Cloud Function reads
    }

    // Processed logos - public read
    match /team-logos/{teamId}/{logoId}/{fileName} {
      allow read: if true;
      allow write: if false; // Only Cloud Function writes
    }

    // Avatar temp uploads - authenticated users can write to their own path
    match /avatar-uploads/{userId}/{fileName} {
      allow write: if request.auth != null && request.auth.uid == userId;
      allow read: if false; // Only Cloud Function reads
    }

    // Processed avatars - public read
    match /user-avatars/{userId}/{fileName} {
      allow read: if true;
      allow write: if false; // Only Cloud Function writes
    }
  }
}
